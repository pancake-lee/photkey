# PHotKey

大写键开启“超级快捷键”状态，映射快捷键，并提供一个参考图（F1唤出）

## 主要功能

- 映射caps（则大写键）作为“HyperKey”
  - 进入状态和退出状态都弹出提示：HyperKey ON/OFF
  - 未进入“HyperKey”时，键盘按正常功能运作
  - 进入“HyperKey”状态后
    - **字符输入键**都将改写，但不影响其他功能键
      - **字符输入键**指的是：字母、数字和标点键
    - 没有配置映射的输入默认弹出一个提示：unmap key
    - 配置将包含一个名称，触发时弹出该名称作为提示
  - 上述提示3秒后自动消失，并且后来的提示将关闭前一个提示
- 用户配置
  - 自动创建并读写位于用户目录下的photkey.conf文件
  - 文件格式为
    - 一个快捷键映射为一行
    - 一行用逗号拼接以下数据
      - shift, 可选
      - ctrl, 可选
      - alt, 可选
      - 字符输入键, 必填
      - 映射目标（ahk语法）
      - 名称, 必填
      - 描述, 可选，更多是注释用而已
    - 因为逗号被用来做分割符，所以映射逗号时，用COMMA代替
      - 示例 `,,,COMMA,RButton,RButton,pink,`
  - 暂时不用提供配置界面，先手动维护

## 语法备忘

- 按键的命名
  - [List of Keys (Keyboard, Mouse and Controller) | AutoHotkey v1](https://www.autohotkey.com/docs/v1/KeyList.htm)
- 直接声明热键（脚本中常见）
  - 形式：a::Label 或 ^!r::Reload
  - 含义：按下指定键时执行冒号后的标签或代码块。
- 修饰符：
  - ^ = Ctrl
  - ! = Alt
  - \+ = Shift
  - \# = Win
- \* 通配，忽略修饰键
  - *a:: 无论是否按住 Shift/Ctrl/Alt 都会触发
  - Hotkey动态定义时不行
- $（避免递归）：防止热键内部 Send 导致自身再次触发。
- 单字符热键（例如 i::）会拦截该键并阻止它原本的输入（除非使用 ~）。
- {Blind}指保持修饰键：SendInput, {Blind}%key%
- 常用提示类型
  - **ToolTip** : 简单、轻量的浮动文本，适合短时提示。
    - 用法：`ToolTip, Text` / `ToolTip`（清除）。
    - 特点：无窗口边框、自动跟随鼠标（也可指定坐标），需要手动设置定时器清除；对多语言文本支持良好。
  - **TrayTip** : 系统托盘通知气泡，显示在任务栏托盘区域上方。
    - 用法：`TrayTip, Title, Text, Seconds, IconNumber`。
    - 特点：更明显、系统级样式；支持持续时间和图标；在某些 Windows 版本上会被系统通知聚合或限制显示频率。
  - **MsgBox** : 模态对话框，带按钮（OK/Yes/No 等），用于需要用户确认的情况。
    - 用法：`MsgBox, Options, Title, Text`。
    - 特点：会阻塞脚本直到用户响应；适合重要提示或确认操作，不适合短暂提示。

## 更多原生快捷键

这些快捷键足够方便，而且Windows系统多年来的用户习惯已经很深刻，不必额外映射

| 分组        | 快捷键  | 功能               | 备注                                |
| ----------- | ------- | ------------------ | ----------------------------------- |
| Alt         | Tab     | 窗口切换           |                                     |
| Alt         | F4      | 关闭程序           |                                     |
| Ctrl        | Tab     | 标签页切换         |                                     |
| Ctrl        | D       | 删除文件           |                                     |
| Ctrl        | Alt+Del | 打开任务管理器     |                                     |
| Ctrl        | P       | 打印               |                                     |
| Win         | Tab     | 任务视图           |                                     |
| Win         | L       | 锁屏               |                                     |
| Win         | .       | 表情面板           |                                     |
| Win         | 方向键  | 分屏/最大化/最小化 |                                     |
| Win         | D       | 显示桌面           | 多屏幕有时候很难准确点击右下角      |
| Win         | Q       | 搜索               |                                     |
| Win + Shift | S       | 截屏               | 建议使用 Snipaste 并把截图映射到 F1 |

下面是一些较少使用但仍有用的系统快捷键：

| 修饰键 | 快捷键 | 功能           | 备注                                                                          |
| ------ | ------ | -------------- | ----------------------------------------------------------------------------- |
| Win    | P      | 投影           | 可以记一下，但设备也不会天天变，桌面右键进入显示设置就可以了                  |
| Win    | R      | 运行           | 右键“开始”就有了                                                            |
| Win    | I      | 设置           | 右键“开始”就有了                                                            |
| Win    | M      | 最小化所有窗口 | 恢复使用 `Win+Shift+M`，不建议。临时去桌面找东西用Win+D就好了，再按一次恢复 |
| Win    | V      | 剪贴板历史     |                                                                               |
| Win    | +/-    | 放大镜         |                                                                               |
| Win    | G      | Xbox 工具      | 可录屏，算不上好用，一般会安装其他软件                                        |
| Win    | E      | 资源管理器     | 一般文件操作都需要配合鼠标，文件管理器都是固定在任务栏的，没必要快捷键        |


## TODO

- 支持功能按键的映射
  - `,,,PrintScreen,Insert,Insert,blue,K2 have no Ins but PrSc key`
- 支持修饰符的指定，修饰符留空表示映射按键，但“透传”修饰符
